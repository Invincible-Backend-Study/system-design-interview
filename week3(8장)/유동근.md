# URL 단축키 설계

## 301 vs 302 응답

| 301                                        | 302                    |
|--------------------------------------------|------------------------|
| 영구적으로 location url로 변경 | 임시적으로 location url로 변경 |
| 서버 부하 감소                                   | 트래픽 분석에 적합             |

## URL 단축 방식
### 데이터 모델
(PK, longURL, shortURL) 로 구성된 데이터를 데이터 베이스에 저장

### 해시 함수
#### 1. 해시 후 충돌

잘 알려진 헤시 함수를 이용하여 url를 압축하고 임의의 값(7)만큼 잘라서 사용
더 작게 사용할 수록 해시 충돌이 발생한다.
해시 충돌이 발생하면 충돌된 결과물과 임의로 정한 문자열을 합성한 데이터를 통해서 다시 해싱한다.
이 과정을 충돌이 일어나지 않을때 까지 반복한다.

* 주의할 점

최소한번 그리고 충돌이 발생할 때마다 추가적으로 데이터베이스 질의가 필요하다.
질의의 비용을 줄이기 위해서 블룸 필터를 사용하면 성능을 개선할 수 있다.

#### 2. base-62 변환
long url를 식별하는 ID를 발급하고 해당 ID에 base62 인코딩을 적용한 값을 url로 활용하는 전략

* 주의할 점

ID가 1씩 증가하는 값이라고 가정하면 다음에 쓸 수 있는 단축 URL이 무엇인지 쉽게 알아낼 수 있어서 보안상 문제가 될 수 있음.