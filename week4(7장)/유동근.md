# 분산 시스템을 위한 유일 ID 생성시 설계

## 다중 마스터 복제
Auto increment의 기능을 확장한 방법이다. 존재하는 마스터의 수인 k개 만큼 증가시켜 유일성을 보장하는 방법

* 장점
  * 구현이 간단하다.
* 단점
  * 여러 데이터 센터에 걸쳐 규모를 늘리기 어렵다.
  * ID의 유일성은 보장되지만 그 값이 시간 흐름에 맞추어 커지도록 보장할 수 없다.
  * 서버를 추가하거나 삭제할 때도 잘 동작하기 어렵다.

## UUID
128bit의 랜던한 ID를 생성하여 유일 ID를 생성하는 기법

* 장점
  * 복잡한 분산 환경을 고려하지 않아 간편하고 쉽다.
    * 동기화 쉬움
    * 규모 확장 쉬움

* 단점
  * ID를 활용하여 데이터를 기준(시간)을 가지고 정렬할 수 없다.
  * 128bit의 고정된 키의 사이즈는 요구되는 집합의 모수보다 많은 경우를 커버하는 경우에는 공간 효율성이 낮다.
  * ID에 숫자가 아닌 값이 포함된다.

## 티켓 서버
유일한 ID를 생성하는 별로의 서버를 운영한다. 하나의 서버에서 키를 생성하기 때문에 유일성이 보장되는 방식

* 장점
  * 유일성이 보장되는 숫자로만 구성된 ID를 쉽게 만들 수 있다.
  * 구현이 쉽다. (중소 규모 애플리케이션에 적합)

* 단점
  * SPOF 단일 장애 지점으로 티켓 서버가 작동할 수 있다.
  * 대규모 서버스나 scalability가 어렵다.

## 트위터 스노플레이크
여러가지 데이터 셋을 병합하여 유일성을 보장하는 id를 생성하는 기법이다.
생성 시간, 데이터 센터 식별자, 서버 인스턴스 식별자, 랜던값을 조합하여 키를 생성한 예제를 보여준다.

* 장점
  * ID를 통해서 생성된 데이터의 시간을 기준으로 정렬할 수 있다.
  * ID가 단순히 식별자로만 사용되는 것이 아니라 다른 정보를 내포하고 있어서 유용하게 활용이 가능하다.
* 단점
  * 키의 데이터 구성 요소를 변경한다면 오버헤드가 크다.
    * ex 1) 5bit를 통해서 서버 인스턴스를 식별하는 경우에 서버 인스턴스가 32개를 초과하는 경우